<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>RKLProject</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
    crossorigin="anonymous" />

  <link rel="icon" type="image/x-icon" href="/assets/images/rkl-logo.png">
  <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap.min.css">
  <!-- style css -->
  <link rel="stylesheet" type="text/css" href="/assets/css/style.css">
  <!-- Responsive-->
  <link rel="stylesheet" href="/assets/css/responsive.css">
  <!-- fevicon -->
  <link rel="icon" href="/assets/images/fevicon.png" type="image/gif" />
  <!-- Scrollbar Custom CSS -->
  <link rel="stylesheet" href="/assets/css/jquery.mCustomScrollbar.min.css">
  <!-- Tweaks for older IEs-->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">

  <link href="/assets/main.css" rel="stylesheet">

  <!-- owl stylesheets -->
  <link rel="stylesheet" href="/assets/css/owl.carousel.min.css">
  <!-- <link rel="stylesheet" href="/src/assets/css/"> -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css"
    media="screen">
  <style>
    #main-panel {
      min-height: 500px;
      height: auto;
      background-color: whitesmoke;
      padding-bottom: 50px;
    }

    #side-panel {
      border: 1px solid gray;
      min-height: 500px;
      height: auto;
      background-color: whitesmoke;
      text-align: center;
    }

    ul {
      list-style: none;
      margin-left: -50px;
      margin-top: 100px;
    }


    li {
      margin-bottom: 20px;
      font-size: large;
      transition: .3s;
    }

    li:hover {
      cursor: pointer;
      color: tomato;
      font-weight: bold;
    }

    #content {
      padding-left: 20px;
      padding-right: 20px;
    }

    #submit-btn {
      margin-top: 30px;
      min-width: 100% !important
    }

    #reset-btn {
      margin-top: 30px;
      min-width: 100% !important
    }

    .result-container {
      background-color: #333;
      padding: 1rem;
      margin-top: 1rem;
    }

    .draggable {
      padding: 1rem;
      background-color: #fff;
      border: 1px solid black;
      cursor: move;
    }

    .dragging {
      opacity: 0.5;
    }

    #options {
      display: flex;
      justify-content: center;
    }

    i {
      font-size: xx-large;
      transition: 0.7s;
    }

    i:hover {
      font-weight: bolder;
      font-size: 50px;
    }

    #option-container {
      display: flex;
      justify-content: center;
      flex-direction: column;
      text-align: center;
      margin: 20px;
      cursor: pointer;
    }

    #option-container:hover {
      font-weight: bold;
    }

    small {
      text-align: center;
    }

    .link {
      color: blue !important;
      cursor: pointer;
    }

    .myhide {
      display: none;
    }

    .home-page-menu-option{
      color: white !important;
      transition: .2;
    }

    .home-page-menu-option :hover{
      color: red !important;
    }
  </style>
</head>

<body>
  <app-root></app-root>

  <!-- Javascript files-->
  <script src="/assets/js/jquery.min.js"></script>
  <script src="/assets/js/popper.min.js"></script>
  <script src="/assets/js/bootstrap.bundle.min.js"></script>
  <script src="/assets/js/jquery-3.0.0.min.js"></script>
  <script src="/assets/js/plugin.js"></script>
  <!-- sidebar -->
  <script src="/assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="/assets/js/custom.js"></script>
  <!-- javascript -->
  <script src="/assets/js/owl.carousel.js"></script>
  <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
  <script type="text/javascript" src="/assets/scripts/main.js"></script>
  <script>
    $(document).ready(function () {
      $(".fancybox").fancybox({
        openEffect: "none",
        closeEffect: "none"
      });

      $(".zoom").hover(function () {

        $(this).addClass('transition');
      }, function () {

        $(this).removeClass('transition');
      });
    });
  </script>
  <script>
    function openNav() {
      document.getElementById("myNav").style.width = "100%";
    }
    function closeNav() {
      document.getElementById("myNav").style.width = "0%";
    }
  </script>
  <script>
    function spanClick() {

      let options = document.querySelectorAll('span');
      const containerResult = document.getElementById("selectedSection");

      options.forEach(elem => {
        elem.addEventListener('click', (event) => {
          window.scrollTo(0,document.body.scrollHeight);
          var tagName = event.target.parentNode.childNodes[1].innerHTML;
          if (tagName === "TextBox") {
            containerResult.innerHTML +=
              `<div class="draggable" draggable="true">
                    <div class="result-header">
                        <h6>TextBox</h6>
                    </div>
                    <hr>
                    <div class="result-body">
                      <h6 class="title">Title</h6>
                        <a class="link" onclick="changeTitleLink(this)">edit title</a>
                        <input type="text" class="myhide" />
                        <input type="button" class="myhide btn btn-success btn-sm" value="Change" onclick="changeTitle(this)" />


                        <input type="text" class="form-control" />
                    </div>
                </div>
            </div> `
            dragAndDrop();

          } else if (tagName === "Password") {
            containerResult.innerHTML +=
              `<div class="draggable" draggable="true">
                    <div class="result-header">
                        <h6>Password Box</h6>
                    </div>
                    <hr>
                    <div class="result-body">
                      <h6 class="title">Title</h6>
                        <a class="link" onclick="changeTitleLink(this)">edit title</a>
                        <input type="text" class="myhide" />
                        <input type="button" class="myhide btn btn-success btn-sm" value="Change" onclick="changeTitle(this)" />


                        <input type="password" class="form-control" />
                    </div>
                </div>
            </div> `
            dragAndDrop();
          } else if (tagName === "TextArea") {
            containerResult.innerHTML +=
              `<div class="draggable" draggable="true">
                    <div class="result-header">
                        <h6>TextArea</h6>
                    </div>
                    <hr>
                    <div class="result-body">
                      <h6 class="title">Title</h6>
                        <a class="link" onclick="changeTitleLink(this)">edit title</a>
                        <input type="text" class="myhide" />
                        <input type="button" class="myhide btn btn-success btn-sm" value="Change" onclick="changeTitle(this)" />


                        <textarea class="form-control" rows="5"></textarea>
                    </div>
                </div>
            </div> `
            dragAndDrop();
          } else if (tagName === "Checkbox") {
            containerResult.innerHTML +=
              `<div class="draggable" draggable="true">
                    <div class="result-header">
                        <h6>CheckBox</h6>
                    </div>
                    <hr>
                    <div class="result-body">
                      <label class="title">Title</label>
                        <a class="link" onclick="changeTitleLink(this)">edit title</a>
                        <input type="text" class="myhide" />
                        <input type="button" class="myhide btn btn-success btn-sm" value="Change" onclick="changeTitle(this)" />


                        <input type="checkbox" onclick="test()" />
                    </div>
                </div>
            </div> `

            dragAndDrop();
          } else if (tagName === "Radio") {
            containerResult.innerHTML +=
              `<div class="draggable" draggable="true">
                    <div class="result-header">
                        <h6>Radio</h6>
                    </div>
                    <hr>
                    <div class="result-body">
                      <label class="title">Title</label>
                        <a class="link" onclick="changeTitleLink(this)">edit title</a>
                        <input type="text" class="myhide" />
                        <input type="button" class="myhide btn btn-success btn-sm" value="Change" onclick="changeTitle(this)" />


                        <input type="radio" onclick="test()" />
                    </div>
                </div>
            </div> `
            dragAndDrop();
          } else if (tagName === "SelectList") {
            containerResult.innerHTML +=
              `<div class="draggable" draggable="true">
                    <div class="result-header">
                        <h6>SelectList</h6>
                    </div>
                    <hr>
                    <div class="result-body">
                      <label class="title">Title</label>
                        <a class="link" onclick="changeTitleLink(this)">edit title</a>
                        <input type="text" class="myhide" />
                        <input type="button" class="myhide btn btn-success btn-sm" value="Change" onclick="changeTitle(this)" />


                        <select name="Title"></select>
                        <a class="link" onclick="addOptionToSelectList(this)">add option</a>
                        <input type="text" placeholder="Write title of your option..." class="myhide" />
                        <input type="button" class="myhide btn btn-info btn-sm" value="Add" onclick="addOption(this)" />
                    </div>
                </div>
            </div> `
            dragAndDrop();
          }
        });
      });
      dragAndDrop();
    }

    function resetForm(e) {
      var container = e.parentNode.parentNode.childNodes[0];
      container.innerHTML = "";
    }

    function changeTitleLink(e) {
      let textbox = $(e).next()[0];
      textbox.classList.remove("myhide");
      $(textbox).next()[0].classList.remove("myhide");
      e.classList.add("myhide");
    }

    function changeTitle(e) {
      e.parentNode.childNodes[1].innerHTML = e.parentNode.childNodes[5].value;
      e.parentNode.childNodes[5].classList.add("myhide");
      e.parentNode.childNodes[3].classList.remove("myhide");
      e.parentNode.childNodes[7].classList.add("myhide");

      e.parentNode.childNodes[9].name = e.parentNode.childNodes[1].innerHTML.replace(" ", "");
    }

    function addOptionToSelectList(e) {
      let optionTitleInput = $(e).next()[0];
      $(optionTitleInput).removeClass("myhide")
      let optionSubmitBtn = $(optionTitleInput).next()[0];
      $(optionSubmitBtn).removeClass("myhide")
    }

    function addOption(e) {
      var selectedOptionTitle = $(e).prev()[0].value;
      var selectList = $(e).prev().prev().prev()[0];
      selectList.innerHTML += ` <option value="${selectedOptionTitle.replace(" ", ",")}">${selectedOptionTitle}</option>`;
      selectList.setAttribute("name", selectedOptionTitle.replace(" ", ""))
      $(e).prev()[0].value = "";
      $(e).prev()[0].classList.add("myhide");
      // $(e).prev().prev()[0].classList.add("myhide");
      $(e).addClass("myhide")
    }

    function submitForm(e) {
      const containerResult = document.getElementById("selectedSection");
      let inputs = [...containerResult.querySelectorAll('input:not(.myhide),select,textarea,.title')];

      let formName = document.getElementById("form-name").value;
      if (formName !== null && formName !== "") {
        window.getFormDetails.zone.run(() => {
          window.getFormDetails.getFormDetails(inputs, formName);
        });
        document.getElementById("selectedSection").innerHTML = "";

      } else {
        document.getElementById("form-name-error").classList.remove("myhide");
      }
    }

    function dragAndDrop() {
      let draggables = document.querySelectorAll('.draggable');
      let containers = document.querySelectorAll('.result-container');


      draggables.forEach(draggable => {
        draggable.addEventListener('dragstart', () => {
          draggable.classList.add('dragging');
        });

        draggable.addEventListener('dragend', () => {
          draggable.classList.remove('dragging');
        });
      });

      containers.forEach(container => {
        container.addEventListener('dragover', e => {
          e.preventDefault();
          const afterElement = getDragAfterElement(container, e.clientY);
          const draggable = document.querySelector('.dragging');
          if (afterElement == null) {
            container.appendChild(draggable);
          } else {
            container.insertBefore(draggable, afterElement);
          }
        });
      });

      function getDragAfterElement(container, y) {
        const draggableElements = [...container.querySelectorAll('.draggable:not(.dragging)')];
        return draggableElements.reduce((Accumulator, child) => {
          const box = child.getBoundingClientRect();
          const offset = y - box.top - box.height / 2;
          if (offset < 0 && offset > Accumulator.offset) {
            return {
              offset: offset,
              element: child
            }
          } else {
            return Accumulator;
          }
        }, { offset: Number.NEGATIVE_INFINITY }).element;
      }
    }
  </script>
</body>

</html>
